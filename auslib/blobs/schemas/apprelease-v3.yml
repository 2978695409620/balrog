---
  title: "App Release Blob (V3)"
  type: "object"
  required:
    - "name"
    - "schema_version"
    - "hashFunction"
  additionalProperties: false
  properties:
    name:
      type: "string"
      description: "Human readable identifier"
      minLength: 1
      maxLength: 100
    schema_version:
      type: "number"
      description: "Blob identifier number"
      enum:
        - 3
    hashFunction:
      type: "string"
      description: "Hash function of files pointed at (returned in responses generated by this Blob"
    appVersion:
      type: "string"
      description: ""
    platformVersion:
      type: "string"
      description: ""
    displayVersion:
      type: "string"
      description: ""
    detailsUrl:
      type: "string"
      description: ""
    licenseUrl:
      type: "string"
      description: ""
    actions:
      type: "string"
      description: ""
    billboardURL:
      type: "string"
      description: ""
    openURL:
      type: "string"
      description: ""
    notificationURL:
      type: "string"
      description: ""
    alertURL:
      type: "string"
      description: ""
    showPrompt:
      type: "boolean"
      description: ""
    showNeverForVersion:
      type: "boolean"
      description: ""
    fakePartials:
      type: "boolean"
      description: ""
    fileUrls:
      type: "object"
      properties:
        channelName:
          type: "string"
          description: ""
          format: "uri"
    ftpFilenames:
      type: "object"
      properties:
        partials:
          type: "object"
          additionalProperties: false
          patternProperties:
            ^.*:
              type: "string"
              description: ""
        completes:
          type: "object"
          additionalProperties: false
          patternProperties:
            ^.*:
              type: "string"
              description: ""
    bouncerProducts:
      type: "object"
      properties:
        partials:
          type: "object"
          additionalProperties: false
          patternProperties:
            ^.*:
              type: "string"
              description: ""
        completes:
          type: "object"
          additionalProperties: false
          patternProperties:
            ^.*:
              type: "string"
              description: ""
    platforms:
      type: "object"
      additionalProperties: false
      patternProperties:
        ^.+$:
          oneOf:
            -
              type: "object"
              required:
                - "alias"
              properties:
                alias:
                  type: "string"
                  description: "Platform to look for file details in instead of this one. Must match another existing platform name."
            -
              type: "object"
              additionalProperties: false
              properties:
                buildID:
                  type: "string"
                  description: ""
                OS_BOUNCER:
                  type: "string"
                  description: ""
                OS_FTP:
                  type: "string"
                  description: ""
                locales:
                  type: "object"
                  additionalProperties: false
                  patternProperties:
                    ^.+$:
                      type: "object"
                      additionalProperties: false
                      properties:
                        isOSUpdate:
                          type: "boolean"
                          description: ""
                        buildID:
                          type: "string"
                          description: ""
                        appVersion:
                          type: "string"
                          description: ""
                        displayVersion:
                          type: "string"
                          description: ""
                        platformVersion:
                          type: "string"
                          description: ""
                        # Using lists instead of dicts for multiple updates
                        # gives us a way to reduce load a bit. As this is
                        # iterated over, each "from" release is looked up
                        # in the database. If the "from" releases that we
                        # we expect to be the most common are earlier in the
                        # list, we can avoid looking up every single entry.
                        # The server doesn't know anything about which order is
                        # best, so we assume the client will make the right
                        # decision about this.
                        partials:
                          type: "array"
                          items:
                            type: "object"
                            required:
                              - "filesize"
                              - "from"
                              - "hashValue"
                            additionalProperties: false
                            properties:
                              filesize:
                                oneOf:
                                  -
                                    type: "number"
                                  -
                                    type: "string"
                                  description: ""
                              from:
                                type: "string"
                                description: ""
                              hashValue:
                                type: "string"
                                description: ""
                              fileUrl:
                                type: "string"
                                description: ""
                                format: "uri"
                        completes:
                          type: "array"
                          items:
                            type: "object"
                            required:
                              - "filesize"
                              - "from"
                              - "hashValue"
                            additionalProperties: false
                            properties:
                              filesize:
                                oneOf:
                                  -
                                    type: "number"
                                  -
                                    type: "string"
                                description: ""
                              from:
                                type: "string"
                                description: ""
                              hashValue:
                                type: "string"
                                description: ""
                              fileUrl:
                                type: "string"
                                description: ""
                                format: "uri"

