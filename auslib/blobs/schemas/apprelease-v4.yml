---
  title: "App Release Blob (V4)"
  type: "object"
  required:
    - "name"
    - "schema_version"
    - "hashFunction"
  additionalProperties: false
  properties:
    name:
      type: "string"
      description: "Human readable identifier"
      minLength: 1
      maxLength: 100
    schema_version:
      type: "number"
      description: "Blob identifier number"
      enum:
        - 4
    hashFunction:
      type: "string"
      description: "Hash function of files pointed at (returned in responses generated by this Blob"
    appVersion:
      type: "string"
      description: ""
    platformVersion:
      type: "string"
      description: ""
    displayVersion:
      type: "string"
      description: ""
    detailsUrl:
      type: "string"
      description: ""
    licenseUrl:
      type: "string"
      description: ""
    actions:
      type: "string"
      description: ""
    billboardURL:
      type: "string"
      description: ""
    openURL:
      type: "string"
      description: ""
    notificationURL:
      type: "string"
      description: ""
    alertURL:
      type: "string"
      description: ""
    showPrompt:
      type: "boolean"
      description: ""
    showNeverForVersion:
      type: "boolean"
      description: ""
    fakePartials:
      type: "boolean"
      description: ""
    # Top level fileUrls are useful primarily for release style builds,
    # where the URLs are predictable and only vary by locale and platform.
    # It's worth noting that while we normally serve different channels
    # through different fileUrls (eg, ftp.mozilla.org vs. download.mozilla.org),
    # each platform+locale combination is expected to receive the same
    # MAR contents regardless of channel. As of yet there is no way to
    # specify different metadata for different channels so doing anything
    # other than above will result in MAR verification failures on the client.
    fileUrls:
      type: "object"
      additionalProperties: false
      patternProperties:
        # This first level contains a channel name, or "*" as a catch all.
        ^.+$:
          type: "object"
          additionalProperties: false
          patternProperties:
            # This is "partials" or "completes" (TODO: enforce this).
            ^.+$:
              type: "object"
              additionalProperties: false
              patternProperties:
                # And this key is a specific release (matched up against
                # incoming requests), "or "*" as a catch all.
                # The value is the URL for this specific
                # channel/update type/incoming release.
                ^.+$:
                  type: "string"
                  description: ""
    platforms:
      type: "object"
      additionalProperties: false
      patternProperties:
        ^.+$:
          oneOf:
            -
              type: "object"
              required:
                - "alias"
              properties:
                alias:
                  type: "string"
                  description: "Platform to look for file details in instead of this one. Must match another existing platform name."
            -
              type: "object"
              additionalProperties: false
              properties:
                buildID:
                  type: "number"
                  description: ""
                OS_BOUNCER:
                  type: "string"
                  description: ""
                OS_FTP:
                  type: "string"
                  description: ""
                locales:
                  type: "object"
                  additionalProperties: false
                  patternProperties:
                    ^.+$:
                      type: "object"
                      additionalProperties: false
                      properties:
                        isOSUpdate:
                          type: "string"
                          description: ""
                        buildID:
                          type: "number"
                          description: ""
                        appVersion:
                          type: "string"
                          description: ""
                        displayVersion:
                          type: "string"
                          description: ""
                        platformVersion:
                          type: "string"
                          description: ""
                        partials:
                          type: "array"
                          items:
                            type: "object"
                            required:
                              - "filesize"
                              - "from"
                              - "hashValue"
                            additionalProperties: false
                            properties:
                              filesize:
                                type: "number"
                                description: ""
                              from:
                                type: "string"
                                description: ""
                              hashValue:
                                type: "string"
                                description: ""
                              fileUrl:
                                type: "string"
                                description: ""
                                format: "uri"
                        completes:
                          type: "array"
                          items:
                            type: "object"
                            required:
                              - "filesize"
                              - "from"
                              - "hashValue"
                            additionalProperties: false
                            properties:
                              filesize:
                                type: "number"
                                description: ""
                              from:
                                type: "string"
                                description: ""
                              hashValue:
                                type: "string"
                                description: ""
                              fileUrl:
                                type: "string"
                                description: ""
                                format: "uri"

